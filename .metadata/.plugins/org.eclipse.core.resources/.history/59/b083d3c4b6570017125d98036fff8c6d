package util;

import java.io.*;
import java.util.ArrayList;


public class CreatTXT {
	
	public void createFile(File fileName) throws Exception {
		try {
			if (!fileName.exists()) {
				fileName.createNewFile();
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	}


	public void writeTxtFile(String Coordinates){

		ArrayList<String> Marks = new ArrayList<String>();
		String[] Coordinate = Coordinates.split("/n");
		for(int i=0;i<Coordinate.length;i++) {
			if(i!=Coordinate.length){
			String Coor=Coordinate[i];
			String[] c=Coor.split(",");
			String lat=c[0];
			String lng=c[1];
			Marks.add("new BMap.Point("+lat+","+lng+"),");
			}else{
				String Coor=Coordinate[i];
				String[] c=Coor.split(",");
				String lat=c[0];
				String lng=c[1];
				Marks.add("var point"+i+"=new BMap.Point("+lat+","+lng+");");
				}
		}
		String[] string = new String[Marks.size()];
		for (int i = 0; i < Marks.size(); i++) {
			string[i] = Marks.get(i);
		}

		try {
			BufferedWriter output = new BufferedWriter(new FileWriter("CoorMarksMap.txt"));
			output.write("<html>"+"<head>"+"<meta http-equiv=\"Content-Type\" content=\"text/html; charset=utf-8\"/>"+"<meta name=\"viewport\" content=\"initial-scale=1.0,user-scalable=no\">"
					+"<script type=\"text/css\">body, html,#allmap {width: 100%;height: 100%;overflow: hidden;margin:0;font-family:\"Î¢ÈíÑÅºÚ\";}#l-map{height:100%;width:78%;float:left;border-right:2px solid #bcbcbc;}#r-result{height:100%;width:20%;float:left;}</script>"
					+"<script type=\"text/javascript\">"+"var map=new BMMap.Map(\"allmap\")"+"var point=new BMap.Point(117.27,31.86);"+"map.centerAndZoom(point,15)"+"function addMarker(point){"+"var marker=new BMap.Marker(point);"+"map.addOverlay(marker);}");
			for (int i = 0; i < string.length-1; i++) {
				output.write(String.valueOf(string[i]) + "\n"+"addMarker(point"+i+");"+"\n");
			}
			output.write(String.valueOf(string[string.length-1]));
			output.write("];");
			for(int i=0;i<string.length;i++){
				output.write("var marker"+i+"=new BMap.Marker(points["+i+"]);\n");
			}
			for (int i=0;i<string.length;i++){
				output.write("map.adOverlay(marker"+i+");\n");
			}
			output.write("map.centerAndZoom(points[6], 16);\n");
			output.write("map.addControl(new BMap.NavigationControl());\n");
			output.write("marker7.addEventListener(\"click\",function(){\nmap.setViewport(points);\n});\n</script>");
			output.close();
		} catch (Exception e) {
			e.printStackTrace();
		}
	}

}